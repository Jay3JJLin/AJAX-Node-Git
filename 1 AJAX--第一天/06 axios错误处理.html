<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>axios错误处理</title>
</head>

<body>
    <button class="btn">注册用户</button>
    <!-- 引入axios库 -->
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.min.js"></script>
    <script>
        /*
            需求：通过 axios 提交用户名和密码，完成注册功能
            注册用户 URL 地址：http://hmajax.itheima.net/api/register
            请求方法：POST
            参数名：
               username 用户名（中英文和数字组成，最少 8 位）
               password 密码（最少 6 位）
            目标：点击按钮，通过axios提交用户和密码，完成注册
            需求：使用axios错误处理语法，拿到报错信息，弹框反馈给用户
        */

        // 1.获取按钮，添加事件
        document.querySelector('.btn').addEventListener('click', () => {
            axios({
                url: 'http://hmajax.itheima.net/api/register',
                // 2.指定请求方法,提交到服务器上 post
                method: 'post',
                // 3.提交数据 data
                data: {
                    username: '我对胡桃一心一意',
                    password: '123456'
                }
            }).then(res => {
                // 4.处理数据
                // 提交成功
                console.log(res);
            }).catch(error => {
                // 5.处理错误信息
                // 提交失败
                console.log(error);
                console.log(error.response.data.message);
                alert(error.response.data.message);
            })
        })
    </script>
</body>

</html>

<!-- 
axios 错误处理
语法：在 then 方法的后面，通过点语法调用 catch 方法，传入回调函数并定义形参
axios({
    请求选项
}).then(result => {
    处理数据
}).catch(error => {
    处理错误
})
 -->