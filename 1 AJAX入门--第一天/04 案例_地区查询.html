<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>案例_地区查询</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        :root {
            font-size: 15px;
        }

        body {
            padding-top: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <form id="editForm" class="row">
            <!-- 输入省份名字 -->
            <div class="mb-3 col">
                <label class="form-label">省份名字</label>
                <input type="text" value="北京" name="province" class="form-control province" placeholder="请输入省份名称" />
            </div>
            <!-- 输入城市名字 -->
            <div class="mb-3 col">
                <label class="form-label">城市名字</label>
                <input type="text" value="北京市" name="city" class="form-control city" placeholder="请输入城市名称" />
            </div>
        </form>
        <button type="button" class="btn btn-primary sel-btn">查询</button>
        <br><br>
        <p>地区列表: </p>
        <ul class="list-group">
            <!-- 示例地区 -->
            <li class="list-group-item">东城区</li>
        </ul>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.min.js"></script>
    <script>
        /*
          获取地区列表: http://hmajax.itheima.net/api/area
          查询参数:
            pname: 省份或直辖市名字
            cname: 城市名字
        */
        // 目标: 根据省份和城市名字, 查询地区列表
        // 1. 查询按钮-点击事件
        document.querySelector('.sel-btn').addEventListener('click', () => {
            // 2.获取(用户输入的)省份和城市名字
            let pname = document.querySelector('.province').value;
            let cname = document.querySelector('.city').value;

            // 3.基于axios请求地区列表数据
            axios({
                url: 'http://hmajax.itheima.net/api/area',
                params: {
                    // 键:值
                    pname, cname
                    // pname: pName,
                    // cname: cName
                    // 当属姓名和value变量名同名时，可以只写一个
                }
            }).then(res => {
                // console.log(res);
                // 4.把数据转小li标签插入到页面中
                let list = res.data.list;
                console.log(res);
                console.log(list);
                // li中包含地区名
                let theLi = list.map(areaName => `<li class="list-group-item">${areaName}</li>`).join('');
                console.log(theLi);
                // 渲染li
                document.querySelector('.list-group').innerHTML = theLi;
            })
        })


    </script>
</body>

</html>

<!-- 
首先：确定 URL 网址和参数说明
• 查询某个省内某个城市的所有地区: http://hmajax.itheima.net/api/area
• 参数名：
pname：省份名字或直辖市名字，比如北京、福建省、辽宁省...
cname：城市名字，比如北京市、厦门市、大连市...
完整：http://hmajax.itheima.net/api/area?pname=北京&cname=北京市

数组中map方法 迭代数组
使用场景：
map 可以处理数据，并且返回新的数组
map 也称为映射.映射是个术语，指两个元素的集之间元素相互 对应 的关系
map 重点在于有返回值，forEach 没有返回值(只是依次输出数组元素)

数组中join方法
作用：
join() 方法用于把数组中的所有元素转换一个字符串
语法：
数组名.join()
参数：
数组元素是通过参数里面指定的分隔符进行分隔的
 -->